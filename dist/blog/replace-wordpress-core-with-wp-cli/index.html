<!DOCTYPE html><html lang="en"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.15.12"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://sharifff.com/blog/replace-wordpress-core-with-wp-cli/"><!-- Primary Meta Tags --><title>Replace WordPress core with WP CLI</title><meta name="title" content="Replace WordPress core with WP CLI"><meta name="description" content=""><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://sharifff.com/blog/replace-wordpress-core-with-wp-cli/"><meta property="og:title" content="Replace WordPress core with WP CLI"><meta property="og:description" content=""><meta property="og:image" content="https://sharifff.com/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://sharifff.com/blog/replace-wordpress-core-with-wp-cli/"><meta property="twitter:title" content="Replace WordPress core with WP CLI"><meta property="twitter:description" content=""><meta property="twitter:image" content="https://sharifff.com/blog-placeholder-1.jpg"><link rel="stylesheet" href="/_astro/_slug_.BtQgwSxT.css"><script type="module">const o=document.body,r=o.getAttribute("data-theme"),c=t=>{t==="dark"?o.setAttribute("data-theme","dark"):t==="light"?o.removeAttribute("data-theme"):localStorage.setItem("theme",r)};c(localStorage.getItem("theme"));setTimeout(()=>o.classList.remove("notransition"),75);(()=>{const t=document.body,a=document.getElementById("mode"),m=e=>{e==="dark"?(localStorage.setItem("theme","light"),t.removeAttribute("data-theme")):e==="light"?(localStorage.setItem("theme","dark"),t.setAttribute("data-theme","dark")):initTheme(e)};a.addEventListener("click",()=>m(localStorage.getItem("theme"))),document.getElementById("menu-trigger").addEventListener("change",function(){const e=document.querySelector(".wrapper");this.checked?e.classList.add("blurry"):e.classList.remove("blurry")})})();
</script></head> <body data-theme="dark" class="notransition"> <header>  <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger"> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></circle> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"> <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></circle> </svg> </a> <div class="trigger"> <div class="trigger-container"> <a href="/" class="menu-link"> Home </a> <a href="/about" class="menu-link"> About </a> <a class="menu-link" href="https://github.com/shariffff" target="_blank" rel="noopener">github</a> </div> </div> </nav> </div> </header> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <!-- <span itemprop="keywords"> <a class="tag" href="/tags/#cli">CLI</a> </span> --> </div> <h1 class="header-title" itemprop="headline">Replace WordPress core with WP CLI</h1> <div class="post-meta"> <time datetime="{{ date | htmlDate }}" itemprop="datePublished"> <time datetime="2022-03-09T00:00:00.000Z"> Mar 9, 2022 </time> </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Sharif Mohammad Eunus</span> </span> <time hidden datetime="{{ date | htmlDate }}" itemprop="dateModified"> <time datetime="2022-03-09T00:00:00.000Z"> Mar 9, 2022 </time> </time> <span hidden itemprop="publisher" itemtype="Person">Sharif Mohammad Eunus</span> </div> </header> <div class="page-content" itemprop="articleBody">  <p>One of the main reasons we often have to replace the WordPress core files is if the site becomes compromised and the malware modifies the core files, causing the dashboard to become inaccessible. In these cases, replacing the core can restore access and help secure the site.</p>
<blockquote>
<p>Make sure to take a backup before the cleanup.</p>
</blockquote>
<h3 id="re-install">Re-install</h3>
<p>The first step will be to check if the core files are intact.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> verify-checksums</span></span>
<span class="line"></span></code></pre>
<p>If core files are intact, the command will return a response <code>Success: WordPress installation verifies against checksums.</code></p>
<p>Otherwise, we should re-install the core files.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span></span>
<span class="line"></span></code></pre>
<p>If the installed WordPress version is 6.0 but the latest version is 6.1, the above command will replace the core files with the latest WordPress version. Also, the <code>--skip-content</code> is used to avoid downloading default WP themes and plugins.</p>
<p>Though it’s recommended to use the latest WordPress version, sometimes you may not want to update the WordPress version to the latest for X reason. That’s when we need to specify the <code>--version</code> flag.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#546E7A;font-style:italic"># get the currently installed version of WordPress</span></span>
<span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> version</span></span>
<span class="line"><span style="color:#546E7A;font-style:italic"># the output will be a number e.g. 6.0</span></span>
<span class="line"><span style="color:#546E7A;font-style:italic"># to re-install the same version</span></span>
<span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span><span style="color:#C3E88D"> --version=6.0</span></span>
<span class="line"></span></code></pre>
<p><strong>to do it in one line</strong></p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span><span style="color:#C3E88D"> --version=</span><span style="color:#89DDFF">$(</span><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core version</span><span style="color:#89DDFF">)</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p>WP CLI can’t always clean up the leftover files. In such cases, check the core version first, delete the <code>wp-admin</code> and <code>wp-includes</code> folders and reinstall the core.</p>
</blockquote>  </div> </article> </main> <main> <article> <div class="hero-image">  </div> <div class="prose"> <div class="title"> <div class="date"> <time datetime="2022-03-09T00:00:00.000Z"> Mar 9, 2022 </time>  </div> <h1>Replace WordPress core with WP CLI</h1> <hr> </div>  <p>One of the main reasons we often have to replace the WordPress core files is if the site becomes compromised and the malware modifies the core files, causing the dashboard to become inaccessible. In these cases, replacing the core can restore access and help secure the site.</p>
<blockquote>
<p>Make sure to take a backup before the cleanup.</p>
</blockquote>
<h3 id="re-install">Re-install</h3>
<p>The first step will be to check if the core files are intact.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> verify-checksums</span></span>
<span class="line"></span></code></pre>
<p>If core files are intact, the command will return a response <code>Success: WordPress installation verifies against checksums.</code></p>
<p>Otherwise, we should re-install the core files.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span></span>
<span class="line"></span></code></pre>
<p>If the installed WordPress version is 6.0 but the latest version is 6.1, the above command will replace the core files with the latest WordPress version. Also, the <code>--skip-content</code> is used to avoid downloading default WP themes and plugins.</p>
<p>Though it’s recommended to use the latest WordPress version, sometimes you may not want to update the WordPress version to the latest for X reason. That’s when we need to specify the <code>--version</code> flag.</p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#546E7A;font-style:italic"># get the currently installed version of WordPress</span></span>
<span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> version</span></span>
<span class="line"><span style="color:#546E7A;font-style:italic"># the output will be a number e.g. 6.0</span></span>
<span class="line"><span style="color:#546E7A;font-style:italic"># to re-install the same version</span></span>
<span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span><span style="color:#C3E88D"> --version=6.0</span></span>
<span class="line"></span></code></pre>
<p><strong>to do it in one line</strong></p>
<pre class="astro-code aurora-x" style="background-color:#07090F;color:#bbbbbb; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core</span><span style="color:#C3E88D"> download</span><span style="color:#C3E88D"> --force</span><span style="color:#C3E88D"> --skip-content</span><span style="color:#C3E88D"> --version=</span><span style="color:#89DDFF">$(</span><span style="color:#FFCB6B">wp</span><span style="color:#C3E88D"> core version</span><span style="color:#89DDFF">)</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p>WP CLI can’t always clean up the leftover files. In such cases, check the core version first, delete the <code>wp-admin</code> and <code>wp-includes</code> folders and reinstall the core.</p>
</blockquote>  </div> </article> </main> </div> <footer class="footer"> <!-- {# <a class="footer_item" href="/feed.xml">rss</a> #} --> <span class="footer_item">&copy; 2024</span> </footer>  </body></html>